# Hixtrip FE Online

## 准备

- fork 此仓库
- 根据如下要求实现相关代码
- 完成要求
  - 提交`pull request`
  - 提供页面截图

## 需求

1. 目前已经有`src/api/user.ts` 以及 `src/api/org.ts` 两个 API
2. 需要实现如下效果界面：

![](./docs/preview.jpg)

> 功能要求：
- 不限 ```React``` 或者 ```Vue```
- 需要拆分 `OrgTree` 以及 `UserTable` 两个组件
  - 两个组件自己维护相关的数据。
  - 体现两个组件的互相通信。
- 组织架构根据点上级节点进行查询子级节点实现异步加载。
- 用户 ```Table ``` 数据跟据点击 ```组织架构树形节点``` 以及 ```输入搜索关键字``` 查询。
  - 需要考虑防抖节流等功能点
- 风格不限
  - 示例图仅仅是效果展示，不需要完全符合。
  - 可以使用 ```UI Framework```, 如 ```ant-design```, ```element-ui```等
  - 如果不用```UI Framework```, 可以直接用原生的```<ul> <li>```, ```<table>``` 实现，不用实现相关的CSS样式, 可以加分。

## 其他简答题

### 如何将如下的`JSON`正确解析成 `Object`
```json
{
  "userId": 111323290434354540545
}
```
一般情况是使用JSON.parse()，但上面的JSON里的值超过了最大整数值，为了转换不失去精度，最好先转换为字符，当然最好一开始就是字符型，大整数比较占内存；  
解析方案：  
1、.replace(/\D/g,'')提取出数字部分为num；  
2、.replace(num,`"${num}"`)转为了{"userId":"111323290434354540545"}；  
3、后用JSON.parse()，最后用BigInt()来保证不失去精度的转换键值的类型；

### 前端需要*稳定*每隔`1s`向服务端请求`API`, 请问如何实现？
使用 setInterval()，确保您的请求不会阻塞主线程，以免影响用户体验，以及优化请求的速度，其他可能发生的问题也还需要考虑；

### 什么情况下，你会为你的项目引入状态管理库，比如`Redux`, `Pinia`, 可以简述一下起到了什么作用么？
如果具有许多组件、状态和数据流，规模比较大，业务相对复杂，那我会引入状态管理库；   

作用：这些库提供了一种结构化的方式来管理全局状态，可以更好地组织和管理应用程序的状态，使代码更易于维护，可以规避掉通过props层层传递数据的繁琐过程和状态混乱导致难以调试的问题；
### 为什么`ESM`与`CJS`不能兼容？
两者不兼容的主要源于它们的设计和执行方式的不同，  
1、CJS是运行时加载模块，ESM是编译时加载模块；  
2、CJS在运行时根据需要加载模块，而ESM在代码编译阶段就确定了模块的依赖关系；  
3、ESM默认启用严格模式，而CJS不会；  
4、严格模式会影响this的指向和作用域，因此在混用时可能导致问题；  
5、ESM支持顶级await，但CJS不支持；  
6、ESM支持多重解析器，CJS不支持多重解析器；  
诸多方面导致了无法兼容，混用的话需要注意点很多。
